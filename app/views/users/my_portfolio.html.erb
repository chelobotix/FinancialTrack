<h1>My Portfolio</h1>

<div class="search-area">
  <h3>Search Cryptos</h3>
  <%= form_with url:search_crypto_path, method: "get", local: true, data: {turbo: false} do %>
    <div class="form-group row">
      <div class="col-sm-9 no-right-padding">
        <%=
          text_field_tag :crypto_name,
                         params[:crypto_name],
                         placeholder: 'Crypto name',
                         autofocus: true,
                         class: 'form-control form-control-large ',
                         required: true
        %>
      </div>
      <div class="col-sm-3 no-left-padding">
        <%= button_tag type: :submit, class: 'btn btn-success' do %>
          <i class="bi bi-search" style="font-size: 1rem; color: #fffff;"></i>
        <% end %>
      </div>
    </div>
  <% end %>
</div>

<% if @crypto %>
  <% if @crypto == "coin not found" %>
    <div class="alert alert-danger col-sm-9 mt-3" role="alert">Sorry, coin not found</div>
  <% else %>
    <div class="card col-sm-9 mt-3">
      <div class="card-header">
        <img src="<%= @crypto.image %>" alt="crypto-logo" class="crypto-logo" />
      </div>
      <div class="card-body">
        <h5 class="card-title"><%= @crypto.name %> (<%= @crypto.symbol.upcase %>)</h5>
        <p class="card-text">Current Price: <%= pluralize(@crypto.last_price, 'USD') %></p>
        <p class="d-inline-flex gap-1">
          <button
            class="btn btn-primary"
            type="button"
            data-bs-toggle="collapse"
            data-bs-target="#collapseExample"
            aria-expanded="false"
            aria-controls="collapseExample"
          >
            More information...
          </button>
        </p>
        <div class="collapse" id="collapseExample">
          <div class="card card-body">
            <%= @crypto.description.html_safe %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
<% end %>
